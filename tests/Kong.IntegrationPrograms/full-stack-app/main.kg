import Demo.MathKit;
import Demo.TextKit;
import Demo.Arrays;
import System;
import System.Text;

namespace Demo.App;

fn Main() {
    // Core feature smoke checks in one multi-file app.
    var checks: int = 0;
    let total: int = Add(40, 2);
    let scaled: double = Scale(1.5);
    let matrix: int[][] = [[1, 2], [42, 99]];
    let picked: int = Pick(matrix);
    let words: string[] = ["hi", "kong"];
    let word: string = Word(words);
    let bytes: byte[] = [1b, 2b, 3b];
    let b: byte = bytes[2];
    let c: char = 'A';
    let fromClr: double = System.Math.Sqrt(9);
    let msg: string = Label(total);
    let cleaned: string = "  kong  ".Trim();
    let builder = new StringBuilder();
    builder.Append("n=");
    builder.Append(System.Convert.ToString(total));
    let built: string = builder.ToString();
    var parsed: bool = false;
    let parseOk: bool = Boolean.TryParse("true", out parsed);
    checks = checks + 1;

    // Exercise logical operators with short-circuit-friendly shape.
    let ok: bool = picked == 42 &&
        word == "kong" &&
        cleaned.Contains("ong") &&
        cleaned.Length == 4 &&
        b == 3b &&
        c == 'A' &&
        fromClr == 3.0 &&
        scaled == 3.0 &&
        parseOk && parsed &&
        checks == 1;

    if (ok || false) {
        System.Console.WriteLine(System.String.Concat(msg, ":", built, ":ok"));
    } else {
        System.Console.WriteLine("bad-pick");
    }
}
